"use strict";(self.webpackChunkcharcoal_ui=self.webpackChunkcharcoal_ui||[]).push([[2139],{"./packages/react-sandbox/src/components/WithIcon/index.story.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Collapse:()=>Collapse,Default:()=>Default,Hide:()=>Hide,LongText:()=>LongText,LongTextOverflow:()=>LongTextOverflow,Naive:()=>Naive,Performance:()=>Performance,Prefix:()=>Prefix,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-knobs/dist/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js")),_styled__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/react-sandbox/src/styled.ts"),___WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/react-sandbox/src/components/WithIcon/index.tsx"),_charcoal_ui_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/utils/dist/index.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Sandbox/WithIcon",component:___WEBPACK_IMPORTED_MODULE_3__.Z},Default=()=>{const fit=(0,_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_0__.boolean)("fit",!0),bigger=(0,_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_0__.boolean)("Icon height bigger than line-height (`fit` is effective)",!1),prefix=(0,_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_0__.boolean)("prefix",!1),show=(0,_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_0__.boolean)("show",!0);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Container,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_3__.Z,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(TestInlineIcon,{lineHeight:bigger?32:22}),show,prefix,fit,children:"Menu"})})};Default.displayName="Default";const Performance=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Container,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_3__.Z,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(TestInlineIcon,{lineHeight:22}),show:!0,fit:!0,width:16,children:"Menu"})});Performance.displayName="Performance";const Naive=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Container,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_3__.Z,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(TestInlineIcon,{lineHeight:22}),show:!0,children:"Menu"})});Naive.displayName="Naive";const Prefix=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Container,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_3__.Z,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(TestIcon,{}),show:!0,prefix:!0,fit:!0,children:"Selection"})});function Container(props){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{css:styled_components__WEBPACK_IMPORTED_MODULE_4__.iv`
        ${(0,_styled__WEBPACK_IMPORTED_MODULE_5__.r)((o=>[o.font.text1,o.typography(14).preserveHalfLeading]))}
        display: flex;
      `,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{css:styled_components__WEBPACK_IMPORTED_MODULE_4__.iv`
          background-color: ${({theme})=>(0,_charcoal_ui_utils__WEBPACK_IMPORTED_MODULE_6__.nC)(theme.color.brand,theme.elementEffect.disabled)};
        `,...props})})}Prefix.displayName="Prefix",Container.displayName="Container";const Hide=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Container,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_3__.Z,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(TestIcon,{}),show:!1,prefix:!0,children:"Selection"})});Hide.displayName="Hide";const Collapse=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Container,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_3__.Z,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(TestIcon,{}),show:"collapse",prefix:!0,children:"Selection"})});Collapse.displayName="Collapse";const LongText=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Container,{css:"\n      width: 200px;\n    ",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_3__.Z,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(TestIcon,{}),children:"Long Long Long Long Long Long Long Long Long Long Text"})});LongText.displayName="LongText";const LongTextOverflow=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Container,{css:"\n      width: 200px;\n    ",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_3__.Z,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(TestIcon,{}),fixed:!0,children:"Long Long Long Long Long Long Long Long Long Long Text"})});LongTextOverflow.displayName="LongTextOverflow";const TestIcon=styled_components__WEBPACK_IMPORTED_MODULE_4__.ZP.div`
  display: inline-block;
  width: 16px;
  height: 16px;
  background-color: currentColor;
`,TestInlineIcon=styled_components__WEBPACK_IMPORTED_MODULE_4__.ZP.div`
  display: inline-flex;
  vertical-align: top;
  align-items: center;
  line-height: ${p=>p.lineHeight}px;
  height: ${p=>p.lineHeight}px;
  &::before {
    content: '';
    display: inline-block;
    height: 16px;
    width: 16px;
    background-color: currentColor;
  }
`;Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"() => {\n  const fit = boolean('fit', true);\n  const bigger = boolean('Icon height bigger than line-height (`fit` is effective)', false);\n  const prefix = boolean('prefix', false);\n  const show = boolean('show', true);\n  return <Container>\n      <WithIcon icon={<TestInlineIcon lineHeight={bigger ? 32 : 22} />} show={show} prefix={prefix} fit={fit}>\n        Menu\n      </WithIcon>\n    </Container>;\n}",...Default.parameters?.docs?.source}}},Performance.parameters={...Performance.parameters,docs:{...Performance.parameters?.docs,source:{originalSource:"() => <Container>\n    <WithIcon icon={<TestInlineIcon lineHeight={22} />} show fit\n  // Hard-coded width (ResizeObserver free and NO measuring cost)\n  width={16}>\n      Menu\n    </WithIcon>\n  </Container>",...Performance.parameters?.docs?.source}}},Naive.parameters={...Naive.parameters,docs:{...Naive.parameters?.docs,source:{originalSource:"() =>\n// NO measuring cost\n<Container>\n    <WithIcon icon={<TestInlineIcon lineHeight={22} />} show>\n      Menu\n    </WithIcon>\n  </Container>",...Naive.parameters?.docs?.source}}},Prefix.parameters={...Prefix.parameters,docs:{...Prefix.parameters?.docs,source:{originalSource:"() => <Container>\n    <WithIcon icon={<TestIcon />} show prefix fit>\n      Selection\n    </WithIcon>\n  </Container>",...Prefix.parameters?.docs?.source}}},Hide.parameters={...Hide.parameters,docs:{...Hide.parameters?.docs,source:{originalSource:"() => <Container>\n    <WithIcon icon={<TestIcon />} show={false} prefix>\n      Selection\n    </WithIcon>\n  </Container>",...Hide.parameters?.docs?.source}}},Collapse.parameters={...Collapse.parameters,docs:{...Collapse.parameters?.docs,source:{originalSource:'() => <Container>\n    <WithIcon icon={<TestIcon />} show="collapse" prefix>\n      Selection\n    </WithIcon>\n  </Container>',...Collapse.parameters?.docs?.source}}},LongText.parameters={...LongText.parameters,docs:{...LongText.parameters?.docs,source:{originalSource:"() => <Container css={`\n      width: 200px;\n    `}>\n    <WithIcon icon={<TestIcon />}>\n      Long Long Long Long Long Long Long Long Long Long Text\n    </WithIcon>\n  </Container>",...LongText.parameters?.docs?.source}}},LongTextOverflow.parameters={...LongTextOverflow.parameters,docs:{...LongTextOverflow.parameters?.docs,source:{originalSource:"() => <Container css={`\n      width: 200px;\n    `}>\n    <WithIcon icon={<TestIcon />} fixed>\n      Long Long Long Long Long Long Long Long Long Long Text\n    </WithIcon>\n  </Container>",...LongTextOverflow.parameters?.docs?.source}}};const __namedExportsOrder=["Default","Performance","Naive","Prefix","Hide","Collapse","LongText","LongTextOverflow"]},"./packages/react-sandbox/src/components/WithIcon/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_foundation_hooks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/react-sandbox/src/foundation/hooks.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=react__WEBPACK_IMPORTED_MODULE_0__.memo((function WithIcon({children,icon,show=!0,prefix:pre=!1,width,fit=!1,fixed=!1}){const node=fit?void 0===width?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(AutoWidthIconAnchor,{show,pre,children:icon}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(IconAnchor,{width,show,pre,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Icon,{children:icon})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(IconAnchorNaive,{show,pre,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(IconNaive,{children:icon})});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(Root,{children:[pre&&node,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Text,{fixed,children}),!pre&&node]})})),Root=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div`
  display: flex;
  align-items: center;
`,Text=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div`
  ${p=>!p.fixed&&styled_components__WEBPACK_IMPORTED_MODULE_2__.iv`
      min-width: 0;
      overflow: hidden;
    `}
  white-space: nowrap;
  text-overflow: ellipsis;
`;function AutoWidthIconAnchor({children,show,pre}){const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),width=(0,_foundation_hooks__WEBPACK_IMPORTED_MODULE_3__.h4)(ref,[null])?.width??0;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(IconAnchor,{width,show,pre,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Icon,{ref,children})})}AutoWidthIconAnchor.displayName="AutoWidthIconAnchor";const forceCenteringCss=styled_components__WEBPACK_IMPORTED_MODULE_2__.iv`
  > svg {
    display: block;
  }
`,iconAnchorCss=styled_components__WEBPACK_IMPORTED_MODULE_2__.iv`
  ${p=>"collapse"===p.show?styled_components__WEBPACK_IMPORTED_MODULE_2__.iv`
          display: none;
        `:styled_components__WEBPACK_IMPORTED_MODULE_2__.iv`
          visibility: ${p.show?"visible":"hidden"};
        `};
  ${p=>p.pre?styled_components__WEBPACK_IMPORTED_MODULE_2__.iv`
          margin-right: 4px;
        `:styled_components__WEBPACK_IMPORTED_MODULE_2__.iv`
          margin-left: 4px;
        `}
`,IconAnchorNaive=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div`
  display: flex;
  align-items: center;

  ${iconAnchorCss}
`,IconNaive=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div`
  display: inline-flex;

  ${forceCenteringCss}
`,IconAnchor=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div`
  display: flex;
  position: relative;
  /* Iconをline-heightに関与させない */
  height: 0;
  /* 横方向の領域は確保する */
  width: ${p=>p.width}px;

  ${iconAnchorCss}
`,Icon=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div`
  display: inline-flex;
  position: absolute;
  transform: translateY(-50%);

  ${forceCenteringCss}
`;try{WithIcon.displayName="WithIcon",WithIcon.__docgenInfo={description:"",displayName:"WithIcon",props:{icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"ReactNode"}},show:{defaultValue:null,description:"アイコンを表示。デフォルトがtrueなので、非表示にするときに使います。 (アイコン自体の幅を維持します)",name:"show",required:!1,type:{name:'boolean | "collapse"'}},prefix:{defaultValue:null,description:"アイコンを前にする",name:"prefix",required:!1,type:{name:"boolean"}},fit:{defaultValue:null,description:"アイコンの高さが文字の高さよりも大きいケースで有効。アイコンの高さをゼロにしてインラインの高さに関与させないようにします。",name:"fit",required:!1,type:{name:"boolean"}},width:{defaultValue:null,description:"`fit`と併用した時にのみ有効な最適化オプション。アイコンの幅の自動計算を行わず指定した数値を利用します。",name:"width",required:!1,type:{name:"number"}},fixed:{defaultValue:null,description:"親要素のサイズに合わせるのではなく、コンテンツのサイズを優先する",name:"fixed",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/react-sandbox/src/components/WithIcon/index.tsx#WithIcon"]={docgenInfo:WithIcon.__docgenInfo,name:"WithIcon",path:"packages/react-sandbox/src/components/WithIcon/index.tsx#WithIcon"})}catch(__react_docgen_typescript_loader_error){}},"./packages/react-sandbox/src/foundation/hooks.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D$:()=>useDebounceAnimationState,h4:()=>useElementSize});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");__webpack_require__("./node_modules/react-dom/index.js");function measure(ref){return null!==ref?ref.getBoundingClientRect():void 0}function useElementSize(ref,deps=[]){const[size,setSize]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)(((state,next)=>void 0===state||void 0===next?next:state.height===next.height&&state.width===next.width?state:next),void 0),[watch,setWatch]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{if(null===watch)return;const observer=new ResizeObserver((()=>{const newSize=measure(watch);setSize(newSize)}));return observer.observe(watch),()=>{observer.unobserve(watch),setSize(void 0)}}),[watch]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{ref.current!==watch&&setWatch(ref.current)})),(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{deps.length>0&&setSize(measure(ref.current))}),deps),(0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(size),size}function useDebounceAnimationState(defaultValue){const[state,setState]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(defaultValue),timer=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();return[state,(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(((value,force=!1)=>{force?setState(value):void 0===timer.current&&(timer.current=requestAnimationFrame((()=>{setState(value),void 0!==timer.current&&(timer.current=void 0)})))}),[])]}},"./packages/react-sandbox/src/styled.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>theme});var styled_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js");const theme=(0,__webpack_require__("./packages/styled/dist/index.esm.js").jG)(styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP)}}]);
//# sourceMappingURL=react-sandbox-src-components-WithIcon-index-story.3d73abb1.iframe.bundle.js.map